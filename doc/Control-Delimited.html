<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Delimited</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Delimited.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Control-Delimited.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">asai-0.0.0.0: A minimal library for delimited continuations.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Portability</th><td>Rank-2 types required</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Maintainer</th><td>mad.one@gmail.com</td></tr><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Control.Delimited</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Delimited continuations
</a><ul><li><a href="#g:2">A family of shift operators
</a></li><li><a href="#g:3">Executing delimited computations
</a></li></ul></li><li><a href="#g:4">Re-exports for convenience
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Delimited continuations featuring answer-type polymorphism, via
 parameterized monads.
</p><p>There is a tutorial available in <a href="Control-Delimited-Tutorial.html">Control.Delimited.Tutorial</a>.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:Delim">Delim</a> s t b</li><li class="src short"><a href="#v:reset">reset</a> ::  <a href="Control-Delimited.html#t:Delim">Delim</a> s t s -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s' s' t</li><li class="src short"><a href="#v:shift0">shift0</a> ::  ((b -&gt; s) -&gt; t) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b</li><li class="src short"><a href="#v:shift1">shift1</a> ::  ((b -&gt; s) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> a t a) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b</li><li class="src short"><a href="#v:shift2">shift2</a> ::  ((b -&gt; <span class="keyword">forall</span> a'.  <a href="Control-Delimited.html#t:Delim">Delim</a> a' a' s) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> a t a) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b</li><li class="src short"><a href="#v:runDelim">runDelim</a> ::  <a href="Control-Delimited.html#t:Delim">Delim</a> t t t -&gt; t</li><li class="src short">module <a href="Control-Indexed-Monad.html">Control.Indexed.Monad</a></li></ul></div><div id="interface"><h1 id="g:1">Delimited continuations
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:Delim" class="def">Delim</a> s t b <a href="src/Control-Delimited.html#Delim" class="link">Source</a></p><div class="doc"><p>The type of a delimited continuation, which is answer-type polymorphic.
</p><p>Functions of type <code>a -&gt; <code><a href="Control-Delimited.html#t:Delim">Delim</a></code> s t b</code> can be thought of as
 functions of type <code>a / s -&gt; b / t</code>, which means given an <code>a</code> we
 return a <code>b</code>, changing the <em>answer type</em> of the continuation from
 <code>s</code> to <code>t</code>.
</p><p>If a <code><a href="Control-Delimited.html#t:Delim">Delim</a></code> does not capture the computation using one of the
 various <code>shift</code> operators (or <code>shift</code> does not change the answer
 type,) then the term is <em>polymorphic</em> in the answer type.
</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:t runDelim $ reset $ shift2 ret !&gt;&gt;= \r -&gt; ret (r + (1 :: Int))
</code></strong>runDelim $ reset $ shift2 ret !&gt;&gt;= \r -&gt; ret (r + (1 :: Int))
  :: Int -&gt; forall a'. Delim a' a' Int
</pre><p>Note how the quantified variable <code>a'</code> is both the input and output
 answer type: thus, it cannot change from what is (in this case, the
 answer type of the enclosing <code><a href="Control-Delimited.html#v:reset">reset</a></code> is <code><a href="/usr/local/share/doc/ghc/html/libraries/base-4.6.0.0/Data-Int.html#t:Int">Int</a></code>.) We use <code><a href="Control-Delimited.html#v:shift2">shift2</a></code>
 here, which uses rank-2 typing to ensure the type variable does not
 'escape', much like the <code>ST</code> monad.
</p></div><div class="subs instances"><p id="control.i:Delim" class="caption collapser" onclick="toggleSection('i:Delim')">Instances</p><div id="section.i:Delim" class="show"><table><tr><td class="src"><a href="Control-Indexed-Monad.html#t:Monad-39-">Monad'</a> <a href="Control-Delimited.html#t:Delim">Delim</a></td><td class="doc"><p>Delimited continuations form a parameterized <code><a href="Control-Indexed-Monad.html#t:Monad-39-">Monad'</a></code>.
</p></td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:reset" class="def">reset</a> ::  <a href="Control-Delimited.html#t:Delim">Delim</a> s t s -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s' s' t<a href="src/Control-Delimited.html#reset" class="link">Source</a></p><div class="doc"><p>Delimit a computation.
</p></div></div><h2 id="g:2">A family of shift operators
</h2><div class="top"><p class="src"><a name="v:shift0" class="def">shift0</a> ::  ((b -&gt; s) -&gt; t) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b<a href="src/Control-Delimited.html#shift0" class="link">Source</a></p><div class="doc"><p>Clear the current continuation and invoke our handler with it
 bound as a parameter.
</p><p>This is the most pure definition of <code>shift</code>.
</p></div></div><div class="top"><p class="src"><a name="v:shift1" class="def">shift1</a> ::  ((b -&gt; s) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> a t a) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b<a href="src/Control-Delimited.html#shift1" class="link">Source</a></p><div class="doc"><p>Clear the current continuation and invoke our handler with it
 bound as a parameter.
</p><p>This is a simple Haskell98 definition of <code>shift</code> that does not enforce
 true answer type polymorphism by abstracting over the internal <code>s</code> and
 <code>t</code> type variables.
</p></div></div><div class="top"><p class="src"><a name="v:shift2" class="def">shift2</a> ::  ((b -&gt; <span class="keyword">forall</span> a'.  <a href="Control-Delimited.html#t:Delim">Delim</a> a' a' s) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> a t a) -&gt; <a href="Control-Delimited.html#t:Delim">Delim</a> s t b<a href="src/Control-Delimited.html#shift2" class="link">Source</a></p><div class="doc"><p>Clear the current continuation and invoke our handler with it
 bound as a paramter.
</p><p>This definition of <code>shift</code> uses Rank-2 types to ensure the answer
 type is in fact polymorphic: note the type of the captured continuation
 is of type <code>Delim t' t' s</code>.
</p></div></div><h2 id="g:3">Executing delimited computations
</h2><div class="top"><p class="src"><a name="v:runDelim" class="def">runDelim</a> ::  <a href="Control-Delimited.html#t:Delim">Delim</a> t t t -&gt; t<a href="src/Control-Delimited.html#runDelim" class="link">Source</a></p><div class="doc"><p>Run a delimited computation.
</p></div></div><h1 id="g:4">Re-exports for convenience
</h1><div class="top"><p class="src">module <a href="Control-Indexed-Monad.html">Control.Indexed.Monad</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.1</p></div></body></html>